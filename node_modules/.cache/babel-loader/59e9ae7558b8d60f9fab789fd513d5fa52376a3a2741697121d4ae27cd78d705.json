{"ast":null,"code":"var _jsxFileName = \"/Users/koushik/Desktop/events/src/pages/PaymentPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentPage = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    title,\n    selectedSeats\n  } = location.state || {};\n  const [email, setEmail] = useState('');\n  const rowPrices = row => ['A', 'B'].includes(row) ? 150 : ['C', 'D', 'E', 'F'].includes(row) ? 250 : 200;\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const payload = {\n      customerEmail: email,\n      items: selectedSeats.map(seat => ({\n        name: `${title} - Seat ${seat}`,\n        amount: rowPrices(seat.charAt(0)),\n        quantity: 1,\n        currency: 'inr'\n      }))\n    };\n    try {\n      const response = await fetch('http://localhost:3000/api/payment/checkout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const data = await response.json();\n      if (data.sessionId) {\n        const stripe = window.Stripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n        const {\n          error\n        } = await stripe.redirectToCheckout({\n          sessionId: data.sessionId\n        });\n        if (error) {\n          console.error('Stripe redirect error:', error.message);\n          alert('Stripe error: ' + error.message);\n        }\n      } else {\n        alert('Failed to create payment session');\n      }\n    } catch (err) {\n      console.error('Payment error:', err);\n      alert('Error processing payment');\n    }\n  };\n  if (!title || !selectedSeats) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '40px',\n        textAlign: 'center'\n      },\n      children: \"Missing booking information. Please select seats again.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  const totalAmount = selectedSeats.reduce((sum, seat) => sum + rowPrices(seat.charAt(0)), 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    style: {\n      padding: '40px',\n      maxWidth: '500px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Payment for \", title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Seats: \", selectedSeats.join(', ')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Total: \\u20B9\", totalAmount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Enter your email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true,\n        style: {\n          width: '100%',\n          padding: '10px',\n          marginBottom: '15px',\n          borderRadius: '5px',\n          border: '1px solid #ccc',\n          fontSize: '1rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#2196f3',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          fontSize: '1rem',\n          cursor: 'pointer'\n        },\n        children: [\"Pay \\u20B9\", totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentPage, \"aqSlatxSYh54M1Sob3D9kjfhP9g=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","jsxDEV","_jsxDEV","PaymentPage","_s","location","navigate","title","selectedSeats","state","email","setEmail","rowPrices","row","includes","handleSubmit","e","preventDefault","payload","customerEmail","items","map","seat","name","amount","charAt","quantity","currency","response","fetch","method","headers","body","JSON","stringify","data","json","sessionId","stripe","window","Stripe","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","error","redirectToCheckout","console","message","alert","err","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","totalAmount","reduce","sum","className","maxWidth","margin","join","onSubmit","marginTop","type","placeholder","value","onChange","target","required","width","marginBottom","borderRadius","border","fontSize","backgroundColor","color","cursor","_c","$RefreshReg$"],"sources":["/Users/koushik/Desktop/events/src/pages/PaymentPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst PaymentPage = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { title, selectedSeats } = location.state || {};\n  const [email, setEmail] = useState('');\n\n  const rowPrices = (row) =>\n    ['A', 'B'].includes(row)\n      ? 150\n      : ['C', 'D', 'E', 'F'].includes(row)\n      ? 250\n      : 200;\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const payload = {\n      customerEmail: email,\n      items: selectedSeats.map((seat) => ({\n        name: `${title} - Seat ${seat}`,\n        amount: rowPrices(seat.charAt(0)),\n        quantity: 1,\n        currency: 'inr',\n      })),\n    };\n\n    try {\n      const response = await fetch('http://localhost:3000/api/payment/checkout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await response.json();\n\n      if (data.sessionId) {\n        const stripe = window.Stripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n        const { error } = await stripe.redirectToCheckout({ sessionId: data.sessionId });\n        if (error) {\n          console.error('Stripe redirect error:', error.message);\n          alert('Stripe error: ' + error.message);\n        }\n      } else {\n        alert('Failed to create payment session');\n      }\n    } catch (err) {\n      console.error('Payment error:', err);\n      alert('Error processing payment');\n    }\n  };\n\n  if (!title || !selectedSeats) {\n    return (\n      <div style={{ padding: '40px', textAlign: 'center' }}>\n        Missing booking information. Please select seats again.\n      </div>\n    );\n  }\n\n  const totalAmount = selectedSeats.reduce(\n    (sum, seat) => sum + rowPrices(seat.charAt(0)),\n    0\n  );\n\n  return (\n    <div className=\"payment-page\" style={{ padding: '40px', maxWidth: '500px', margin: '0 auto' }}>\n      <h2>Payment for {title}</h2>\n      <p>Seats: {selectedSeats.join(', ')}</p>\n      <p>Total: ₹{totalAmount}</p>\n\n      <form onSubmit={handleSubmit} style={{ marginTop: '20px' }}>\n        <input\n          type=\"email\"\n          placeholder=\"Enter your email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n          style={{\n            width: '100%',\n            padding: '10px',\n            marginBottom: '15px',\n            borderRadius: '5px',\n            border: '1px solid #ccc',\n            fontSize: '1rem',\n          }}\n        />\n        <button\n          type=\"submit\"\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#2196f3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '5px',\n            fontSize: '1rem',\n            cursor: 'pointer',\n          }}\n        >\n          Pay ₹{totalAmount}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}