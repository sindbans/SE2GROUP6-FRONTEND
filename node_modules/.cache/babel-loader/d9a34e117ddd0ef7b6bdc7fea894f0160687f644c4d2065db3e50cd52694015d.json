{"ast":null,"code":"var _jsxFileName = \"/Users/koushik/Desktop/events/src/pages/SeatSelectionPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport './SeatSelectionPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SeatSelectionPage = () => {\n  _s();\n  const {\n    eventId\n  } = useParams();\n  const {\n    state\n  } = useLocation();\n  const navigate = useNavigate();\n  const [seats, setSeats] = useState([]);\n  const [selectedSeats, setSelectedSeats] = useState([]);\n  const event = state === null || state === void 0 ? void 0 : state.event;\n  useEffect(() => {\n    fetch(`http://localhost:3000/api/seats/${eventId}`).then(res => res.json()).then(data => setSeats(data));\n  }, [eventId]);\n  const toggleSeat = seat => {\n    setSelectedSeats(prev => prev.includes(seat) ? prev.filter(s => s !== seat) : [...prev, seat]);\n  };\n  const handleProceed = () => {\n    if (selectedSeats.length === 0) {\n      alert(\"Please select at least one seat\");\n      return;\n    }\n    const totalPrice = selectedSeats.reduce((sum, seatId) => {\n      const seat = seats.find(s => s._id === seatId);\n      return sum + ((seat === null || seat === void 0 ? void 0 : seat.price) || 0);\n    }, 0);\n    navigate('/payment', {\n      state: {\n        title: event.title,\n        quantity: selectedSeats.length,\n        price: totalPrice / selectedSeats.length,\n        // per seat price\n        selectedSeats\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"seat-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Select Seats for \", event === null || event === void 0 ? void 0 : event.title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seat-grid\",\n      children: seats.map(seat => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `seat ${selectedSeats.includes(seat._id) ? 'selected' : ''} ${seat.tier.toLowerCase()}`,\n        onClick: () => !seat.isBooked && toggleSeat(seat._id),\n        children: [seat.seatNumber, \" (\", seat.tier, \")\"]\n      }, seat._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"proceed-btn\",\n      onClick: handleProceed,\n      children: \"Proceed to Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(SeatSelectionPage, \"EUuDdz4AzBHAFXuTi09gZvDrirQ=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = SeatSelectionPage;\nexport default SeatSelectionPage;\nvar _c;\n$RefreshReg$(_c, \"SeatSelectionPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useLocation","useNavigate","jsxDEV","_jsxDEV","SeatSelectionPage","_s","eventId","state","navigate","seats","setSeats","selectedSeats","setSelectedSeats","event","fetch","then","res","json","data","toggleSeat","seat","prev","includes","filter","s","handleProceed","length","alert","totalPrice","reduce","sum","seatId","find","_id","price","title","quantity","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","tier","toLowerCase","onClick","isBooked","seatNumber","_c","$RefreshReg$"],"sources":["/Users/koushik/Desktop/events/src/pages/SeatSelectionPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport './SeatSelectionPage.css';\n\nconst SeatSelectionPage = () => {\n  const { eventId } = useParams();\n  const { state } = useLocation();\n  const navigate = useNavigate();\n  const [seats, setSeats] = useState([]);\n  const [selectedSeats, setSelectedSeats] = useState([]);\n\n  const event = state?.event;\n\n  useEffect(() => {\n    fetch(`http://localhost:3000/api/seats/${eventId}`)\n      .then(res => res.json())\n      .then(data => setSeats(data));\n  }, [eventId]);\n\n  const toggleSeat = (seat) => {\n    setSelectedSeats((prev) =>\n      prev.includes(seat) ? prev.filter(s => s !== seat) : [...prev, seat]\n    );\n  };\n\n  const handleProceed = () => {\n    if (selectedSeats.length === 0) {\n      alert(\"Please select at least one seat\");\n      return;\n    }\n\n    const totalPrice = selectedSeats.reduce((sum, seatId) => {\n      const seat = seats.find(s => s._id === seatId);\n      return sum + (seat?.price || 0);\n    }, 0);\n\n    navigate('/payment', {\n      state: {\n        title: event.title,\n        quantity: selectedSeats.length,\n        price: totalPrice / selectedSeats.length, // per seat price\n        selectedSeats\n      }\n    });\n  };\n\n  return (\n    <div className=\"seat-page\">\n      <h2>Select Seats for {event?.title}</h2>\n      <div className=\"seat-grid\">\n        {seats.map(seat => (\n          <div\n            key={seat._id}\n            className={`seat ${selectedSeats.includes(seat._id) ? 'selected' : ''} ${seat.tier.toLowerCase()}`}\n            onClick={() => !seat.isBooked && toggleSeat(seat._id)}\n          >\n            {seat.seatNumber} ({seat.tier})\n          </div>\n        ))}\n      </div>\n      <button className=\"proceed-btn\" onClick={handleProceed}>Proceed to Payment</button>\n    </div>\n  );\n};\n\nexport default SeatSelectionPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AACtE,OAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAQ,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC/B,MAAM;IAAEQ;EAAM,CAAC,GAAGP,WAAW,CAAC,CAAC;EAC/B,MAAMQ,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAEtD,MAAMe,KAAK,GAAGN,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEM,KAAK;EAE1BhB,SAAS,CAAC,MAAM;IACdiB,KAAK,CAAC,mCAAmCR,OAAO,EAAE,CAAC,CAChDS,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAIR,QAAQ,CAACQ,IAAI,CAAC,CAAC;EACjC,CAAC,EAAE,CAACZ,OAAO,CAAC,CAAC;EAEb,MAAMa,UAAU,GAAIC,IAAI,IAAK;IAC3BR,gBAAgB,CAAES,IAAI,IACpBA,IAAI,CAACC,QAAQ,CAACF,IAAI,CAAC,GAAGC,IAAI,CAACE,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKJ,IAAI,CAAC,GAAG,CAAC,GAAGC,IAAI,EAAED,IAAI,CACrE,CAAC;EACH,CAAC;EAED,MAAMK,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAId,aAAa,CAACe,MAAM,KAAK,CAAC,EAAE;MAC9BC,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IAEA,MAAMC,UAAU,GAAGjB,aAAa,CAACkB,MAAM,CAAC,CAACC,GAAG,EAAEC,MAAM,KAAK;MACvD,MAAMX,IAAI,GAAGX,KAAK,CAACuB,IAAI,CAACR,CAAC,IAAIA,CAAC,CAACS,GAAG,KAAKF,MAAM,CAAC;MAC9C,OAAOD,GAAG,IAAI,CAAAV,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEc,KAAK,KAAI,CAAC,CAAC;IACjC,CAAC,EAAE,CAAC,CAAC;IAEL1B,QAAQ,CAAC,UAAU,EAAE;MACnBD,KAAK,EAAE;QACL4B,KAAK,EAAEtB,KAAK,CAACsB,KAAK;QAClBC,QAAQ,EAAEzB,aAAa,CAACe,MAAM;QAC9BQ,KAAK,EAAEN,UAAU,GAAGjB,aAAa,CAACe,MAAM;QAAE;QAC1Cf;MACF;IACF,CAAC,CAAC;EACJ,CAAC;EAED,oBACER,OAAA;IAAKkC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBnC,OAAA;MAAAmC,QAAA,GAAI,mBAAiB,EAACzB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEsB,KAAK;IAAA;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACxCvC,OAAA;MAAKkC,SAAS,EAAC,WAAW;MAAAC,QAAA,EACvB7B,KAAK,CAACkC,GAAG,CAACvB,IAAI,iBACbjB,OAAA;QAEEkC,SAAS,EAAE,QAAQ1B,aAAa,CAACW,QAAQ,CAACF,IAAI,CAACa,GAAG,CAAC,GAAG,UAAU,GAAG,EAAE,IAAIb,IAAI,CAACwB,IAAI,CAACC,WAAW,CAAC,CAAC,EAAG;QACnGC,OAAO,EAAEA,CAAA,KAAM,CAAC1B,IAAI,CAAC2B,QAAQ,IAAI5B,UAAU,CAACC,IAAI,CAACa,GAAG,CAAE;QAAAK,QAAA,GAErDlB,IAAI,CAAC4B,UAAU,EAAC,IAAE,EAAC5B,IAAI,CAACwB,IAAI,EAAC,GAChC;MAAA,GALOxB,IAAI,CAACa,GAAG;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAKV,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNvC,OAAA;MAAQkC,SAAS,EAAC,aAAa;MAACS,OAAO,EAAErB,aAAc;MAAAa,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChF,CAAC;AAEV,CAAC;AAACrC,EAAA,CA3DID,iBAAiB;EAAA,QACDL,SAAS,EACXC,WAAW,EACZC,WAAW;AAAA;AAAAgD,EAAA,GAHxB7C,iBAAiB;AA6DvB,eAAeA,iBAAiB;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}